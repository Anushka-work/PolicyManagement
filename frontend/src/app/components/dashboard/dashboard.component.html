<div class="dashboard-container">
  <div class="dashboard-content">
    <!-- Header -->
    <div class="dashboard-header">
      <div>
        <h2 class="p-m-0">Policy Management Dashboard</h2>
        <p class="p-text-secondary p-mt-1">Welcome back, {{ username }}!</p>
        <p class="p-text-secondary" style="font-size: 0.9rem; margin-top: 0.25rem;">
          <i class="pi pi-info-circle"></i> {{ getRoleDescription() }}
        </p>
      </div>
      <div class="user-info">
        <span class="p-text-bold p-d-flex p-align-center">
          <i class="pi pi-user p-mr-2"></i>
          {{ userRole }}
        </span>
        <small class="p-d-block p-text-secondary">{{ lastLoginDate | date:'short' }}</small>
      </div>
    </div>

    <!-- Main Stats Cards -->
    <div class="p-grid stats-grid">
      <!-- Total Policies -->
      <div class="p-col-12 p-md-6 p-lg-3">
        <div class="stat-box stat-box-blue">
          <div class="stat-content">
            <div class="stat-label">Total Policies</div>
            <div class="stat-value">{{ totalPolicies }}</div>
            <div class="stat-sublabel">{{ activePolicies }} Active</div>
          </div>
          <div class="stat-icon">
            <i class="pi pi-file"></i>
          </div>
        </div>
      </div>

      <!-- Total Claims -->
      <div class="p-col-12 p-md-6 p-lg-3">
        <div class="stat-box stat-box-green">
          <div class="stat-content">
            <div class="stat-label">Total Claims</div>
            <div class="stat-value">{{ totalClaims }}</div>
            <div class="stat-sublabel">{{ approvedClaims }} Approved</div>
          </div>
          <div class="stat-icon">
            <i class="pi pi-inbox"></i>
          </div>
        </div>
      </div>

      <!-- Pending Claims -->
      <div class="p-col-12 p-md-6 p-lg-3">
        <div class="stat-box stat-box-orange">
          <div class="stat-content">
            <div class="stat-label">Pending Claims</div>
            <div class="stat-value">{{ pendingClaims }}</div>
            <div class="stat-sublabel">Awaiting Review</div>
          </div>
          <div class="stat-icon">
            <i class="pi pi-clock"></i>
          </div>
        </div>
      </div>

      <!-- Total Users -->
      <div class="p-col-12 p-md-6 p-lg-3" *ngIf="isAdmin()">
        <div class="stat-box stat-box-purple">
          <div class="stat-content">
            <div class="stat-label">System Users</div>
            <div class="stat-value">{{ totalUsers }}</div>
            <div class="stat-sublabel">Active Users</div>
          </div>
          <div class="stat-icon">
            <i class="pi pi-users"></i>
          </div>
        </div>
      </div>
    </div>

    <!-- Detailed Stats Row -->
    <div class="p-grid details-grid">
      <!-- Policies Summary -->
      <div class="p-col-12 p-md-6">
        <p-card styleClass="details-card">
          <ng-template pTemplate="header">
            <div class="card-header-content">
              <i class="pi pi-file-edit"></i>
              <span>Policies Summary</span>
            </div>
          </ng-template>
          <ng-template pTemplate="content">
            <div class="summary-grid">
              <div class="summary-item">
                <div class="summary-label">Total</div>
                <div class="summary-value summary-blue">{{ totalPolicies }}</div>
              </div>
              <div class="summary-item">
                <div class="summary-label">Active</div>
                <div class="summary-value summary-green">{{ activePolicies }}</div>
              </div>
              <div class="summary-item">
                <div class="summary-label">Inactive</div>
                <div class="summary-value summary-gray">{{ totalPolicies - activePolicies }}</div>
              </div>
            </div>
            <p-button 
              *ngIf="!isReadOnly()"
              label="View All Policies" 
              icon="pi pi-arrow-right" 
              styleClass="p-button-outlined p-mt-3"
              [routerLink]="['/policies']">
            </p-button>
            <div *ngIf="isReadOnly()" class="p-mt-3 p-text-secondary">
              <i class="pi pi-eye p-mr-2"></i>
              <small>View Only Access</small>
            </div>
          </ng-template>
        </p-card>
      </div>

      <!-- Claims Summary -->
      <div class="p-col-12 p-md-6">
        <p-card styleClass="details-card">
          <ng-template pTemplate="header">
            <div class="card-header-content">
              <i class="pi pi-list"></i>
              <span>Claims Summary</span>
            </div>
          </ng-template>
          <ng-template pTemplate="content">
            <div class="summary-grid">
              <div class="summary-item">
                <div class="summary-label">Pending</div>
                <div class="summary-value summary-orange">{{ pendingClaims }}</div>
              </div>
              <div class="summary-item">
                <div class="summary-label">Approved</div>
                <div class="summary-value summary-green">{{ approvedClaims }}</div>
              </div>
              <div class="summary-item">
                <div class="summary-label">Rejected</div>
                <div class="summary-value summary-red">{{ rejectedClaims }}</div>
              </div>
            </div>
            <p-button 
              *ngIf="!isReadOnly()"
              label="View All Claims" 
              icon="pi pi-arrow-right" 
              styleClass="p-button-outlined p-button-success p-mt-3"
              [routerLink]="['/claims']">
            </p-button>
            <div *ngIf="isReadOnly()" class="p-mt-3 p-text-secondary">
              <i class="pi pi-eye p-mr-2"></i>
              <small>View Only Access</small>
            </div>
          </ng-template>
        </p-card>
      </div>
    </div>
  </div>
</div>